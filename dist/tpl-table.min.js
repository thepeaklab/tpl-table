!function(){"use strict";angular.module("tpl.table",["tpl.scope-listener-manager"])}(),function(){"use strict";function a(){function a(a){return"boolean"==typeof a?a?"✓":"✘":a}return a}angular.module("tpl.table").filter("checkmark",a)}(),function(){"use strict";angular.module("tpl.table").directive("tplTable",function(){return{restrict:"E",controller:"TplTableCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"src/tpltable.directive.html",scope:{opts:"=tplTableOptions"}}}).directive("focusMe",["$timeout","scopeListenerManager",function(a,b){return{link:function(c,d,e){b.saveAddListener(c,c.$watch(e.focusMe,function(b){b===!0&&a(function(){d[0].focus(),c[e.focusMe]=!1})}))}}}]).controller("TplTableCtrl",["$scope","$rootScope","$document","$timeout","tplTableService","$log","scopeListenerManager",function(a,b,c,d,e,f,g){function h(){k.POSSIBLE_RANGE_VALUES=[10,25,50,100],k.POSSIBLE_CONTENT_TYPES=["TEXT","IMAGE"],k.CONTENT_TYPE_TEXT=0,k.CONTENT_TYPE_IMAGE=1,k.editableCell=[null,null],k.opts.id=k.opts.id||"tpltable",k.opts.loading=k.opts.loading||!1,k.opts.noDataAvailableText=k.opts.noDataAvailableText||"No Data Available ...",k.opts.showActionsColumn=k.opts.showActionsColumn||!1,k.opts.searchModel=void 0!==k.opts.searchModel?k.opts.searchModel:null,k.opts.showPagination=null!==k.opts.showPagination&&void 0!==k.opts.showPagination?k.opts.showPagination:!0,k.opts.paginationModel=k.opts.paginationModel||null,k.opts.pageCount=k.opts.pageCount||null,k.opts.entriesPerPageCount=k.opts.entriesPerPageCount||null,k.opts.entries=k.opts.entries||[],k.opts.entrieValuesOrder=k.opts.entrieValuesOrder||null,k.opts.onRowClick=k.opts.onRowClick||null,k.opts.actions=k.opts.actions||{add:{"function":null,"if":function(){return!1}},"delete":{"function":null,"if":function(){return!1}},assign:{"function":null,"if":function(){return!1}},edit:{"function":null,"if":function(){return!1}},confirm:{"function":null,"if":function(){return!1}}},k.opts.pageAndSearchChangeMethod=k.opts.pageAndSearchChangeMethod||function(){f.info("tbl-table: no pageAndSearchChangeMethod given")},k.opts.columns=k.opts.columns||[{name:"",editable:!0,unit:null,content:k.POSSIBLE_CONTENT_TYPES[k.CONTENT_TYPE_TEXT]},{name:"",editable:!0,unit:null,content:k.POSSIBLE_CONTENT_TYPES[k.CONTENT_TYPE_TEXT]},{name:"",editable:!0,unit:null,content:k.POSSIBLE_CONTENT_TYPES[k.CONTENT_TYPE_TEXT]},{name:"",editable:!0,unit:null,content:k.POSSIBLE_CONTENT_TYPES[k.CONTENT_TYPE_TEXT]}],k.paginationStart=1,k.paginationEnd=1,k.opts.colors=k.opts.colors||{},k.opts.colors.primaryColor=k.opts.colors.primaryColor||"e8f7fe",k.opts.colors.secondaryColor=k.opts.colors.secondaryColor||"004894",k.opts.colors.primaryFontColor=k.opts.colors.primaryFontColor||"333333",k.opts.colors.secondaryFontColor=k.opts.colors.secondaryFontColor||"ffffff",e.addTable(angular.copy(k.opts));var a=e.getStateBeforeDetail(k.opts.id);if(a){var b=String(a.actualSearch)||"";b.length&&(k.opts.searchModel=b);var c=Number(a.actualPage);c>=0&&(k.opts.paginationModel=a.actualPage+1)}i()}function i(){g.saveAddListener(a,a.$on("$destroy",function(){e.setStateBeforeDetail(k.opts.id,{actualPage:k.opts.paginationModel-1,actualSearch:k.opts.searchModel})})),g.saveAddListener(a,a.$watch("vm.opts.searchModel",function(a,b){if(""!==b&&b||a===b)if(""!==a&&a||l)a!==b&&(1===k.opts.paginationModel?k.opts.pageAndSearchChangeMethod():(k.opts.paginationModel=1,n()));else{var c=e.getStateBeforeSearch(k.opts.id);c.pageBeforeSearch>=0&&(1===k.opts.paginationModel&&c.pageBeforeSearch+1===k.opts.paginationModel&&k.opts.pageAndSearchChangeMethod(),k.opts.paginationModel=c.pageBeforeSearch+1,e.setStateBeforeSearch(k.opts.id,null))}else e.setStateBeforeSearch(k.opts.id,k.opts.paginationModel-1),1===k.opts.paginationModel?k.opts.pageAndSearchChangeMethod():(k.opts.paginationModel=1,n());l=!1})),g.saveAddListener(a,a.$watch("vm.opts.paginationModel",function(a,b){if(a===b||a!==b){if(""!==k.opts.searchModel)if(a===b){var c=e.getStateBeforeDetail(k.opts.id);c.actualPage>=0?(k.opts.paginationModel=c.actualPage+1,c.actualSearch&&(k.opts.searchModel=c.actualSearch,k.searchInput=k.opts.searchModel),e.setStateBeforeDetail(k.opts.id,{actualPage:null,actualSearch:null})):k.opts.pageAndSearchChangeMethod()}else k.opts.pageAndSearchChangeMethod();else l||k.opts.pageAndSearchChangeMethod();l=!1}})),g.saveAddListener(a,a.$watch("vm.opts.entriesPerPageCount",function(a,b){!a&&0!==a||a===b||(k.opts.paginationModel=1,o(),k.opts.pageAndSearchChangeMethod())})),g.saveAddListener(a,a.$watch("vm.opts.pageCount",function(a){(a||0===a)&&(n(),o())})),g.saveAddListener(a,a.$watchCollection("vm.opts.columns",function(a){a&&a.length&&angular.forEach(a,function(a){if(a.content&&""!==a.content){var b=a.content.toUpperCase();k.POSSIBLE_CONTENT_TYPES.indexOf(b)<0?a.content=k.POSSIBLE_CONTENT_TYPES[k.CONTENT_TYPE_TEXT]:a.content=b}else a.content=k.POSSIBLE_CONTENT_TYPES[k.CONTENT_TYPE_TEXT]})}))}function j(a,b){var c=b.split("."),d={2:function(){return a[c[0]]?a[c[0]][c[1]]:"-"},3:function(){return a[c[0]]&&a[c[0]][c[1]]?a[c[0]][c[1]][c[2]]:"-"},4:function(){return a[c[0]]&&a[c[0]][c[1]]&&a[c[0]][c[1]][c[2]]?a[c[0]][c[1]][c[2]][c[3]]:"-"}};return d[c.length]?d[c.length]():""}var k=this,l=!0,m=5;k.getCellValue=j,h();var n=function(){var a=k.opts.paginationModel-(m-1)/2;a>0?k.paginationStart=a:k.paginationStart=1;var b=k.opts.paginationModel+(m-1)/2;b<=k.opts.pageCount&&b-k.paginationStart===5?k.paginationEnd=b:k.paginationStart+(m-1)<=k.opts.pageCount?k.paginationEnd=k.paginationStart+(m-1):k.paginationEnd=k.opts.pageCount};a.skipPagesForward=function(){var a=k.opts.paginationModel+m;a<=k.dataPageCount?k.opts.paginationModel+=m:k.opts.paginationModel=k.opts.pageCount,n(),o()},a.skipPagesBackward=function(){var a=k.opts.paginationModel-m;a>0?k.opts.paginationModel=a:k.opts.paginationModel=1,n(),o()},a.setPage=function(a){k.opts.paginationModel=a,n(),o()},a.setSearch=function(){k.opts.searchModel=k.searchInput,o()};var o=function p(a){d(function(){k.editableCell[0]=null,k.editableCell[1]=null,a&&a.stopPropagation(),c.find("body").unbind("click",p)},0)};a.toggleEditCell=function(a,b,d){a.stopPropagation(),k.editableCell[0]=b,k.editableCell[1]=d,k.tempEditColumnCopy=angular.copy(k.opts.entries[b]),angular.forEach(k.tempEditColumnCopy,function(a,b){("-"===a||"--"===a||"---"===a)&&(k.tempEditColumnCopy[b]=null)}),c.find("body").bind("click",o)},a.saveEditedColumn=function(){k.opts.entries[k.editableCell[0]]=k.tempEditColumnCopy,b.$emit("tpltable.datarow.edited."+k.opts.id,k.editableCell[0],k.opts.entries[k.editableCell[0]]),k.editableCell[0]=null,k.editableCell[1]=null}}])}(),function(){"use strict";function a(){function a(a){var b=angular.copy(f[a.id]);a.pageObj={actualPage:b&&b.pageObj?b.pageObj.actualPage:null,actualSearch:b&&b.pageObj?b.pageObj.actualSearch:"",pageBeforeSearch:b&&b.pageObj?b.pageObj.pageBeforeSearch:null},f[a.id]=a}function b(a,b){f[a].pageObj.actualPage=b.actualPage,f[a].pageObj.actualSearch=b.actualSearch}function c(a){return a&&f[a]?{actualPage:f[a].pageObj?f[a].pageObj.actualPage:null,actualSearch:f[a].pageObj?f[a].pageObj.actualSearch:""}:null}function d(a,b){f[a].pageObj.pageBeforeSearch=b}function e(a){return a&&f[a]?{pageBeforeSearch:f[a].pageObj?f[a].pageObj.pageBeforeSearch:null}:null}var f={},g={addTable:a,setStateBeforeDetail:b,getStateBeforeDetail:c,setStateBeforeSearch:d,getStateBeforeSearch:e};return g}angular.module("tpl.table").service("tplTableService",a)}(),function(){"use strict";angular.module("tpl.table").filter("toRange",function(){return function(a){var b,c;1===a.length?(b=0,c=+a[0]-1):2===a.length&&(b=+a[0],c=+a[1]);for(var d=b,e=[];c>=d;)e.push(d),d++;return e}})}(),angular.module("tpl.table").directive("loadingpoints",function(){"use strict";return{restrict:"E",templateUrl:"src/loading-points.directive.html"}}),angular.module("tpl.table").run(["$templateCache",function(a){"use strict";a.put("src/loading-points.directive.html",'<!-- <svg width="70" height="20">\n  <rect width="6" height="6" x="0" y="0" rx="1" ry="1">\n    <animate attributeName="width" values="0;6;6;6;0" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="height" values="0;6;6;6;0" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="x" values="3;0;0;0;3" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="y" values="3;0;0;0;3" dur="1000ms" repeatCount="indefinite"/>\n  </rect>\n  <rect width="6" height="6" x="10" y="0" rx="1" ry="1">\n    <animate attributeName="width" values="0;6;6;6;0" begin="200ms" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="height" values="0;6;6;6;0" begin="200ms" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="x" values="10;8;8;8;10" begin="200ms" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="y" values="3;0;0;0;3" begin="200ms" dur="1000ms" repeatCount="indefinite"/>\n  </rect>\n  <rect width="6" height="6" x="20" y="0" rx="1" ry="1">\n    <animate attributeName="width" values="0;6;6;6;0" begin="400ms" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="height" values="0;6;6;6;0" begin="400ms" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="x" values="18;16;16;16;18" begin="400ms" dur="1000ms" repeatCount="indefinite"/>\n    <animate attributeName="y" values="3;0;0;0;3" begin="400ms" dur="1000ms" repeatCount="indefinite"/>\n  </rect>\n</svg> -->\n<div id="rect3"></div>\n<div id="rect2"></div>\n<div id="rect1"></div>\n'),a.put("src/tpltable.directive.html",'\n<div class="top-row">\n\n  <div class="elementsperside__select prettyselect" ng-if="vm.opts.entriesPerPageCount && vm.opts.showPagination">\n    <select class="top-row__entry-count input-sm" ng-model="vm.opts.entriesPerPageCount" ng-options="o as o for o in vm.POSSIBLE_RANGE_VALUES" ng-style="{\'color\': vm.opts.colors.secondaryColor}"></select>\n  </div>\n  <span class="elementsperside__label" ng-if="vm.opts.entriesPerPageCount && vm.opts.showPagination">\n    {{ \'TABLE_ENTRIES_PER_SITE\' | translate }} {{dataOrder}}\n  </span>\n\n  <form ng-if="vm.opts.searchModel!==null" ng-submit="setSearch()">\n    <input class="top-row__search" type="text" ng-model="vm.searchInput" placeholder="{{\'TABLE_SEARCH\'|translate}}" />\n  </form>\n\n</div>\n\n<table class="tpltable">\n\n  <thead class="tpltable__head">\n    <tr>\n      <th ng-repeat="column in vm.opts.columns" ng-if="!column.ngIf || column.ngIf()">\n        <span ng-if="!column.translateColumn">{{column.name}}</span>\n        <span ng-if="column.translateColumn">{{column.name | translate}}</span>\n      </th>\n      <th ng-if="vm.opts.showActionsColumn" class="edit">Aktionen</th>\n    </tr>\n  </thead>\n\n  <tbody class="tpltable__body">\n\n    <tr class="tpltable__row--placeholder" ng-if="!vm.opts.entries || !vm.opts.entries.length || vm.opts.loading">\n      <td colspan="{{vm.opts.entrieValuesOrder.length + (vm.opts.actions ? 1 : 0)}}">\n        <span ng-if="!vm.opts.loading">{{vm.opts.noDataAvailableText | translate}}</span>\n        <loadingpoints ng-if="vm.opts.loading"></loadingpoints>\n      </td>\n    </tr>\n\n    <tr ng-if="vm.opts.entries && vm.opts.entries.length" ng-repeat="row in vm.opts.entries">\n\n      <td ng-repeat="cell in vm.opts.entrieValuesOrder" ng-mouseleave="hover=false" ng-mouseenter="hover=true" ng-style="vm.editableCell[0]===$parent.$parent.$index && {\'background-color\': vm.opts.colors.primaryColor, \'color\': vm.opts.colors.primaryFontColor}" ng-class="{\'clickable\': vm.opts.onRowClick, \'notclickable\': !vm.opts.onRowClick || vm.editableCell[0]!==null}" ng-click="!vm.opts.onRowClick || vm.editableCell[0]!==null || vm.opts.onRowClick($parent.$parent.$index)" ng-if="!vm.opts.columns[$index].ngIf || vm.opts.columns[$index].ngIf()">\n\n        <div ng-if="(vm.editableCell[0]!==$parent.$parent.$parent.$index || vm.editableCell[1]!==$index || !vm.opts.columns[$index].editable)">\n          <!-- TEXT -->\n          <div class="cell__text" ng-if="vm.opts.columns[$index].content === vm.POSSIBLE_CONTENT_TYPES[0]">\n            <span ng-if="!vm.opts.columns[$index].translateValues">\n              {{(cell.indexOf(\'.\') !== -1 ? vm.getCellValue(row, cell) : row[cell]) | checkmark}} {{columnValues[$index]}}\n            </span>\n            <span ng-if="vm.opts.columns[$index].translateValues">\n              {{((vm.opts.columns[$index].translateValuePrefix ? vm.opts.columns[$index].translateValuePrefix : \'\') + (cell.indexOf(\'.\') !== -1 ? vm.getCellValue(row, cell) : row[cell])) | translate}} {{columnValues[$index]}}\n            </span>\n          </div>\n          <!-- IMAGE -->\n          <div class="cell__image" ng-if="vm.opts.columns[$index].content === vm.POSSIBLE_CONTENT_TYPES[1]">\n            <img  ng-src="{{row[cell]}}" ng-style="{\'max-width\': vm.opts.columns[$index].maxWidth ? vm.opts.columns[$index].maxWidth : \'250px\', \'max-height\': vm.opts.columns[$index].maxHeight ? vm.opts.columns[$index].maxHeight : \'250px\'}" />\n          </div>\n          <!-- OTHER ??? -->\n        </div>\n\n        <span ng-if="vm.editableCell[1]===$index && vm.editableCell[0]===$parent.$index && vm.opts.columns[$index].editable">\n          <input type="text" class="edit-input" ng-model="vm.tempEditColumnCopy[cell]" focus-me="vm.editableCell[1]===$index && vm.editableCell[0]===$parent.$parent.$index" ng-click="$event.stopPropagation()" ng-keyup="$event.keyCode == 13 && saveEditedColumn()"/> {{columnValues[$index]}}\n        </span>\n\n        <div class="cell-controll edit" ng-if="vm.opts.columns[$index].editable && hover" ng-click="toggleEditCell($event, $parent.$parent.$index, $index)" ng-style="hoverEdit && {\'background-color\': vm.opts.colors.primaryColor, \'color\': vm.opts.colors.primaryFontColor}" ng-mouseenter="hoverEdit=true" ng-mouseleave="hoverEdit=false">\n          <div ng-if="hover" class="iconfont tbl-iconfont-pen"></div>\n        </div>\n        <div class="cell-controll save" ng-if="vm.opts.columns[$index].editable && vm.editableCell[0]===$parent.$index && vm.editableCell[1]===$index" ng-style="{\'background-color\': vm.opts.colors.secondaryColor, \'color\': vm.opts.colors.secondaryFontColor}" ng-click="$parent.hover=false;saveEditedColumn()">\n          <div  class="iconfont iconfont-check"></div>\n        </div>\n      </td>\n\n      <td ng-if="vm.opts.showActionsColumn" class="edit">\n        <span ng-if="vm.opts.actions.assign.function && vm.opts.actions.assign.if($index)" class="tbl-iconfont tbl-iconfont-export" ng-click="!vm.opts.actions.assign.function || vm.editableCell[0]!==null || vm.opts.actions.assign.function($index)"></span>\n        <span ng-if="vm.opts.actions.edit.function && vm.opts.actions.edit.if($index)" class="tbl-iconfont tbl-iconfont-pen" ng-click="!vm.opts.actions.edit.function || vm.editableCell[0]!==null || vm.opts.actions.edit.function($index)"></span>\n        <span ng-if="vm.opts.actions.delete.function && vm.opts.actions.delete.if($index)" class="tbl-iconfont tbl-iconfont-delete" ng-click="!vm.opts.actions.delete.function || vm.editableCell[0]!==null || vm.opts.actions.delete.function($index)"></span>\n        <span ng-if="vm.opts.actions.add.function && vm.opts.actions.add.if($index)" class="icon icon-cal-button" ng-click="!vm.opts.actions.add.function || vm.editableCell[0] !== null || vm.opts.actions.add.function($index)"></span>\n        <span ng-if="vm.opts.actions.confirm.function && vm.opts.actions.confirm.if($index)" class="iconfont iconfont-check" ng-click="!vm.opts.actions.confirm.function ||  vm.editableCell[0]!=null || vm.opts.actions.confirm.function($index)"></span>\n      </td>\n\n    </tr>\n  </tbody>\n\n</table>\n\n<div class="bottom-row" ng-if="vm.opts.paginationModel && vm.opts.showPagination">\n  <div class="paginator">\n\n    <div class="paginator__first" ng-class="{\'inactive\': vm.opts.paginationModel === 1}"\n    ng-style="vm.opts.paginationModel !== 1 && !pageFirstHover && {\'color\': vm.opts.colors.secondaryColor} ||\n    vm.opts.paginationModel !== 1 && pageFirstHover && {\'color\': vm.opts.colors.secondaryColor, \'background-color\': vm.opts.colors.primaryColor}"\n    ng-disabled="vm.opts.paginationModel === 1" ng-click="setPage(1)" ng-mouseenter="pageFirstHover=true" ng-mouseleave="pageFirstHover=false"> {{\'TABLE_PAGING_START\'|translate}}</div>\n\n    <div class="paginator__mid" ng-if="vm.paginationStart > 1" ng-click="skipPagesBackward()"\n      ng-style="pageMid1Hover && {\'color\': vm.opts.colors.secondaryColor, \'background-color\': vm.opts.colors.primaryColor} ||\n      {\'color\': vm.opts.colors.secondaryColor}"\n      ng-mouseenter="pageMid1Hover=true" ng-mouseleave="pageMid1Hover=false"> ... </div>\n\n      <div class="paginator__mid" ng-class="{\'active\': i === vm.opts.paginationModel}" ng-repeat="i in [vm.paginationStart, vm.paginationEnd] | toRange" ng-click="setPage(i)"\n      ng-style="i !== vm.opts.paginationModel && !pageMidHover && {\'color\': vm.opts.colors.secondaryColor} ||\n      i !== vm.opts.paginationModel && pageMidHover && {\'background-color\': vm.opts.colors.primaryColor, \'color\': vm.opts.colors.secondaryColor} ||\n      {\'color\': vm.opts.colors.secondaryFontColor, \'background-color\': vm.opts.colors.secondaryColor}"\n      ng-mouseenter="pageMidHover=true" ng-mouseleave="pageMidHover=false"> {{i}} </div>\n\n      <div class="paginator__mid" ng-if="vm.paginationEnd < vm.opts.pageCount" ng-click="skipPagesForward()"\n      ng-style="pageMid2Hover && {\'color\': vm.opts.colors.secondaryColor, \'background-color\': vm.opts.colors.primaryColor} ||\n      {\'color\': vm.opts.colors.secondaryColor}"\n      ng-mouseenter="pageMid2Hover=true" ng-mouseleave="pageMid2Hover=false"> ... </div>\n\n      <div class="paginator__last" ng-class="{\'inactive\': vm.opts.paginationModel === vm.opts.pageCount}"\n      ng-style="vm.opts.paginationModel !== vm.opts.pageCount && !pageLastHover && {\'color\': vm.opts.colors.secondaryColor} ||\n      vm.opts.paginationModel !== vm.opts.pageCount && pageLastHover && {\'color\': vm.opts.colors.secondaryColor, \'background-color\': vm.opts.colors.primaryColor}"\n      ng-disabled="vm.opts.paginationModel === vm.opts.pageCount" ng-click="setPage(vm.opts.pageCount)" ng-mouseenter="pageLastHover=true" ng-mouseleave="pageLastHover=false"> {{\'TABLE_PAGING_END\'|translate}}</div>\n\n    </div>\n  </div>\n')}]);